#! /usr/bin/env bash

# vbox down [-f|null] :vname

# check vname availability

if [[ -z "$vname" ]]
then
	r_quit 1 "Missing virtual machine name"
fi

# resolve vname
resolve_vm_name $vname

# check physical state
vboxmanage list runningvms | grep -i $vname > /dev/null

# quit if vname is not a running virtual machine
if [[ $? -ne 0 ]]
then
	r_quit 1 "Virtual machine [\"${vname}\"] not running."
fi

# close all all remotely related to the vm


# close it
vboxmanage controlvm $vname poweroff
