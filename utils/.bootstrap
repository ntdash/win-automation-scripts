#! /usr/bin/env bash

declare cmd_name=$1

# command args
declare argv=${@:2}


# command should be provied other wise quit
[[ -z $cmd_name ]] && echo "Command not defined" && exit 1;


# source files global files
declare main_partials=( "helper" "profile" "cleanup" )
declare partials_bname=$(dirname $0)

for _filename in ${main_partials[@]}
do

	declare resolved_pathname="${partials_bname}/g.${_filename}"

	[[ ! -f $resolved_pathname ]] && echo "Failed to source script at \"$resolved_pathname\"." && exit 1

	# source file if exists
	source $resolved_pathname

done

declare exec_pathanme="${scripts_path}/commands/${cmd_name}/.exec"

[[ ! -f $exec_pathanme ]] && echo "Command \"${cmd_name}\" .exec file missing."

bash $exec_pathanme $argv
